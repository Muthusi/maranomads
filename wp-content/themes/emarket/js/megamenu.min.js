!function(a){a.fn.megamenu=function(m){m=jQuery.extend({wrap:".nav-mega",speed:0,rtl:!1,mm_timeout:0},m);var l=a(this);function t(e){menucontent=a(e).find(".dropdown-menu"),menuitemlink=a(e).find(".item-link"),menuitemlink_offset=menuitemlink.offset(),menucontentinner=a(e).find(".nav-level1"),mega_full=!!a(e).hasClass("megamenu-full"),wrap_O=0==m.rtl?l.offset().left:a(window).width()-(l.offset().left+l.outerWidth()),wrap_W=l.outerWidth(),menu_parent=menuitemli_O=0==m.rtl?a(e).offset().left:a(window).width()-(a(e).offset().left+a(e).outerWidth()),menuitemli_W=a(e).outerWidth(),menuitemlink_H=menuitemlink.outerHeight(),menuitemlink_W=menuitemlink.outerWidth(),menuitemlink_O=0==m.rtl?menuitemlink_offset.left:a(window).width()-(menuitemlink_offset.left+menuitemlink.outerWidth()),menucontent_W=menucontent.outerWidth();var t,n=wrap_O+wrap_W,i=menuitemlink_O+menucontent_W,e=!!(a(e).hasClass("shop-emarket")||a(e).hasClass("blog-emarket")||a(e).hasClass("promotions-emarket")||a(e).hasClass("special-emarket"));mega_full||e?(t=menuitemlink_O-wrap_O,0==m.rtl?menucontent.css({left:"-"+t+"px",width:wrap_W+"px"}):menucontent.css({left:"auto",right:-t+"px",width:wrap_W+"px"})):n<=i&&((t=n-i+menuitemlink_O-menuitemli_O)>wrap_O&&(t=wrap_O-menuitemlink_O),0==m.rtl?t>wrap_O?menucontent.css({left:t+"px",width:wrap_W+"px"}):menucontent.css({left:t+"px"}):t>wrap_O?menucontent.css({left:"auto",right:t+"px",width:wrap_W+"px"}):menucontent.css({left:"auto",right:t+"px"}))}l.find(".emarket-mega > li").each(function(){a(this).find(".dropdown-menu"),a(this).find(".item-link:first"),a(this).find(".nav-level1");var n=a(this),e=!!n.hasClass("level1");!n.hasClass("dropdown")||(a("body").hasClass("menu-click")?(n.on("click",function(){t(n),a(this).find(">ul").toggleClass("visible")}),a(document).mouseup(function(e){var t=n.find(">ul");t.is(e.target)||0!==t.has(e.target).length||t.removeClass("visible")}),n.find('> a[data-toogle="dropdown"]').on("click",function(e){e.preventDefault()})):t(n))})},a(document).on("ready",function(){var e=a("body").hasClass("rtl");a(".header-mid").megamenu({wrap:".nav-mega",justify:"left",rtl:e}),a(".header-bottom").megamenu({wrap:".nav-mega",justify:"left",rtl:e})})}(jQuery);